"use strict";(self.webpackChunkpurple=self.webpackChunkpurple||[]).push([[875],{4012:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var s=a(7294),n=a(1721),r=a(7462),l=a(3366),i=a(7326),c=a(9931),o=a.n(c),m=a(1026),d=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind((0,i.Z)(a)),a.submit=a.submit.bind((0,i.Z)(a)),a}(0,n.Z)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.submit=function(){this.ref&&this.ref.submit()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,n=e.inline,i=e.tag,c=e.innerRef,d=(0,l.Z)(e,["className","cssModule","inline","tag","innerRef"]),u=(0,m.mx)(o()(t,!!n&&"form-inline"),a);return s.createElement(i,(0,r.Z)({},d,{ref:c,className:u}))},t}(s.Component);d.defaultProps={tag:"form"};var u=d,g=function(e){var t=e.className,a=e.cssModule,n=e.noGutters,i=e.tag,c=e.form,d=e.widths,u=(0,l.Z)(e,["className","cssModule","noGutters","tag","form","widths"]),g=[];d.forEach((function(t,a){var s=e[t];if(delete u[t],s){var n=!a;g.push(n?"row-cols-"+s:"row-cols-"+t+"-"+s)}}));var p=(0,m.mx)(o()(t,n?"no-gutters":null,c?"form-row":"row",g),a);return s.createElement(i,(0,r.Z)({},u,{className:p}))};g.defaultProps={tag:"div",widths:["xs","sm","md","lg","xl"]};var p=g,f=function(e){var t=e.className,a=e.cssModule,n=e.row,i=e.disabled,c=e.check,d=e.inline,u=e.tag,g=(0,l.Z)(e,["className","cssModule","row","disabled","check","inline","tag"]),p=(0,m.mx)(o()(t,!!n&&"row",c?"form-check":"form-group",!(!c||!d)&&"form-check-inline",!(!c||!i)&&"disabled"),a);return"fieldset"===u&&(g.disabled=i),s.createElement(u,(0,r.Z)({},g,{className:p}))};f.defaultProps={tag:"div"};var h=f,E=a(7335),v=a(2869),w=a(2805),N=a(2085),M=a(1070),S=a.n(M),b=a(5186),P=a(5444),Z=function(e){(0,n.Z)(a,e);var t=a.prototype;function a(t){var a;return(a=e.call(this,t)||this).onChangehandler=function(e){var t=e.target.name,s=e.target.value,n={};n[t]=s,a.setState(n)},a.onSignInHandler=function(){a.validateForm()&&(a.setState({isLoading:!0}),S().post({}.GATSBY_API_URL+"/api/login",{email:a.state.email,password:a.state.password}).then((function(e){a.setState({isLoading:!1}),200===e.status&&(localStorage.setItem("isLoggedIn",!0),localStorage.setItem("userData",JSON.stringify(e.data)),a.setState({msg:e.data.message,redirect:!0})),"failed"===e.data.status&&void 0===e.data.success?(a.setState({errMsgEmail:e.data.validation_error.email,errMsgPwd:e.data.validation_error.password}),setTimeout((function(){a.setState({errMsgEmail:"",errMsgPwd:""})}),2e3)):"failed"===e.data.status&&!1===e.data.success&&(a.setState({errMsg:e.data.message}),setTimeout((function(){a.setState({errMsg:""})}),2e3))})).catch((function(e){401===e.response.status&&(a.setState({isLoading:!1}),a.setState({errMsg:"Please check your email & password."}),setTimeout((function(){a.setState({errMsg:""})}),2e3))})))},a.state={email:"",password:"",msg:"",isLoading:!1,redirect:!1,errMsgEmail:"",errMsgPwd:"",errMsg:""},a}return t.componentDidMount=function(){document.body.classList.add("signup_body")},t.componentWillUnmount=function(){document.body.classList.remove("signup_body")},t.validateForm=function(){var e=this,t=!0;(this.state.email||(t=!1,this.setState({errMsgEmail:"*Please enter your email."}),setTimeout((function(){e.setState({errMsgEmail:""})}),2e3)),void 0!==this.state.email)&&(new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(this.state.email)||(t=!1,this.setState({errMsgEmail:"Please enter valid email."}),setTimeout((function(){e.setState({errMsgEmail:""})}),2e3)));return this.state.password||(t=!1,this.setState({errMsgPwd:"*Please enter your password."}),setTimeout((function(){e.setState({errMsgPwd:""})}),2e3)),t},t.render=function(){var e=this.state.isLoading;return(0,N.$8)()?((0,N.JT)(),null):s.createElement(s.Fragment,null,s.createElement("div",{className:"signup_sec"},s.createElement(b.q,null,s.createElement("title",null,"Sign In")),s.createElement("div",{className:"container"},s.createElement("div",{className:"row"},s.createElement("div",{className:"col-lg-6 offset-lg-3"},s.createElement("div",{className:"signup"},s.createElement("h2",null,"Log In"),s.createElement("p",null,"Need an account? ",s.createElement(P.Link,{to:"/signup"},"SignUp")),s.createElement("div",{className:"signup_form_tab"},s.createElement("div",{className:"signup_form"},s.createElement(u,{className:"containers",autoComplete:"off"},s.createElement(p,null,s.createElement("div",{className:"col-lg-12"},s.createElement(h,null,s.createElement(E.Z,{for:"email"},"Email id"),s.createElement(v.Z,{type:"email",name:"email",placeholder:"Enter email",value:this.state.email,onChange:this.onChangehandler}),s.createElement("span",{className:"text-danger"},this.state.msg),s.createElement("span",{className:"text-danger"},this.state.errMsgEmail))),s.createElement("div",{className:"col-lg-12"},s.createElement(h,null,s.createElement(E.Z,{for:"password"},"Password"),s.createElement(v.Z,{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.onChangehandler,autoComplete:"off"}),s.createElement("span",{className:"text-danger"},this.state.errMsgPwd))),s.createElement("div",{className:"col-lg-12"},s.createElement("div",{className:"lost_password"},s.createElement(E.Z,{className:"custom_checkbox"},"Remember Me",s.createElement(v.Z,{type:"checkbox"}),s.createElement("span",{className:"checkmark"})),s.createElement("p",null,s.createElement("a",{href:"#"},"Lost Password?")))),s.createElement("div",{className:"col-lg-12"},s.createElement("p",{className:"text-danger"},this.state.errMsg),s.createElement(w.Z,{className:"signup_btn",color:"success",onClick:this.onSignInHandler},"Sign In",e?s.createElement("span",{className:"spinner-border spinner-border-sm ml-5",role:"status","aria-hidden":"true"}):s.createElement("span",null))),s.createElement("div",{className:"col-lg-12"},s.createElement("div",{className:"signup_form_text text-center"},s.createElement("p",null,"This site is protected by reCAPTCHA and the Google ",s.createElement("a",{href:"#"},"Privacy Policy")," and ",s.createElement("a",{href:"#"},"Terms of Service")," apply.")))))))))))))},a}(s.Component),y=a(5203),k=function(){return(0,N.$8)()?((0,N.JT)(),null):s.createElement(y.Z,null,s.createElement(Z,null))}}}]);
//# sourceMappingURL=component---src-pages-login-js-cb8977b97c33252e01e4.js.map